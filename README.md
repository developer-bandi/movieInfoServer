# 1.소개

간단한 영화 소개 사이트입니다. 디자인과 기능은 네이버, 다음, 넷플릭스, 왓챠, 웨이브를 참고하였습니다. 영화 정보 는 TMDB에서 제공하는 open api를 사용하였습니다.

사이트: https://movieinfoservice.netlify.app/

# 2.기술스택

- express: 미들웨어 기반의 서버를 편리하게 구성하기 위해서 사용하였습니다.
- sequelize: 관계형 데이터 베이스를 편리하게 이용하기 위해서 사용한 orm 입니다
- passport: 로그인 기능 구현을 위해 사용하였습니다.
- redis: 세션 쿠키를 반영구적으로 저장하기 위해서 사용하였습니다.

# 3.라우터 구성

- auth: 회원 가입, 로그인, 로그아웃, 로그인 체크 등의 로그인 관련된 기능을 담당합니다.
- comment: 댓글 쓰기 삭제 불러오기 등의 기능을 담당합니다.
- like: 좋아요 관련 기능을 담당합니다.
- middlewares: 다른 라우터에서 로그인 혹은 비로그인 조건을 체크하는 기능을 담당합니다.
- movieapi: 영화 정보를 다른 url 에서 가져오는 기능을 담당합니다.

# 4. 프로젝트 진행시 경험한 내용

## 1. 비밀번호 암호화

기본적으로 비밀번호는 단방향 암호화를 채택하기에, 회원가입시, 로그인시 모두 프론트에서 암호화된 비밀번호를 받아서 비교해야하나, 사용하는 라이브러리가 프론트에서 동작하지 않아서, 다른 라이브러리를 사용하여, 일단 프론트에서 양방향 암호화를 하여 비밀번호를 숨긴뒤, 이후 백엔드에서 단방향 암호화 하여 db에 저장하는 방식을 채택하였습니다.

## 2. 영화 정보 수정후 전송

영화 정보를 제공하는 사이트는 기본적으로 정제되지 않은 데이터를 주기 때문에, 필요하지 않은 데이터도 상당수 받게 됩니다. 이때, 이를 그대로 프론트로 보낸뒤 필요한 데이터만 사용할수 있지만, 이는 결국 전송과정에서 필요없는 데이터를 제공하게 되어 성능 저하로 이어지므로, 먼저 서버에서 데이터를 정제한뒤, 이후 프론트로 전송하는 과정을 도입하였습니다. 프론트측 코드도 깔끔해지고, 성능 적인 측면에도 이점이 있지만, 이는 백엔드측에서 더 많은 일을 해야 하기에, 이러한 부분에 있어서 많은 논의가 필요함을 느꼈습니다.

# 5. ERD

![ex_screenshot](./img/erd.png)
